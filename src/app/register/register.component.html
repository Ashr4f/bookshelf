<form
  nz-form
  [formGroup]="validateForm"
  class="register-form"
  (ngSubmit)="submitForm()"
>
  <nz-form-item>
    <nz-form-control nzErrorTip="The input is not valid E-mail!">
      <nz-input-group nzPrefixIcon="mail">
        <input
          type="text"
          nz-input
          formControlName="email"
          placeholder="Email"
        />
      </nz-input-group>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-control nzErrorTip="Please input your password!">
      <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplate">
        <input
          [type]="passwordVisible ? 'text' : 'password'"
          nz-input
          formControlName="password"
          (ngModelChange)="updateConfirmValidator()"
          placeholder="Password"
        />
      </nz-input-group>
      <ng-template #suffixTemplate>
        <i
          nz-icon
          [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
          (click)="passwordVisible = !passwordVisible"
        ></i>
      </ng-template>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-control [nzErrorTip]="errorTpl">
      <nz-input-group nzPrefixIcon="lock" [nzSuffix]="confirmSuffixTemplate">
        <input
          [type]="confirmPasswordVisible ? 'text' : 'password'"
          nz-input
          formControlName="checkPassword"
          placeholder="Confirm password"
        />
      </nz-input-group>
      <ng-template #errorTpl let-control>
        <ng-container *ngIf="control.hasError('required')">
          Please confirm your password!
        </ng-container>
        <ng-container *ngIf="control.hasError('confirm')">
          Two passwords that you enter is inconsistent!
        </ng-container>
      </ng-template>
      <ng-template #confirmSuffixTemplate>
        <i
          nz-icon
          [nzType]="confirmPasswordVisible ? 'eye-invisible' : 'eye'"
          (click)="confirmPasswordVisible = !confirmPasswordVisible"
        ></i>
      </ng-template>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-control nzErrorTip="Please input your username!">
      <nz-input-group nzPrefixIcon="user">
        <input
          type="text"
          nz-input
          formControlName="username"
          placeholder="Username"
        />
      </nz-input-group>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <span *ngIf="registerHasError" style="color: #f5222d;">
      {{ registerError }}
    </span>
    <nz-form-control>
      <button nz-button class="register-form-button" [nzType]="'primary'">
        Register
      </button>
      <p>
        Do you
        <a routerLink="/login">have an account already?</a>
      </p>
    </nz-form-control>
  </nz-form-item>
</form>
